
<!DOCTYPE>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> 연아의 작품 사이트 </title>
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="works.css">
        


        


</head>

<body>
    
    <div class="navBox">
        <img class="iconBtn" id="menuBtn" src="/img/icons/menuBtn.png"/>
         <a id="title">VIVID</a>
        <a href="https://www.instagram.com/r_vivid_y/" target="_blank"><img class="iconBtn" id="menuBtn" src="/img/icons/instagram.png"/></a>
    </div>
    
    <div class="menuWrap">
        <nav id="menu">
                <form id="frm1" action="aboutus" method="get">
                    <p><a href="#" onclick="return document.getElementById('frm1').submit();" type="submit" class="listStyle">About us</a></p>
                </form>
                
                <form id="frm2" action="works" method="get">
                    <p><a href="#" onclick="return document.getElementById('frm2').submit();" type="submit" class="listStyle">Works</a></p>
                </form>

                <form action="test" method="get">
                    <p><a href="#" type="submit" class="listStyle">Store</a></p>
                </form>

                <form action="test" method="get">
                    <p><a href="#" type="submit" class="listStyle">Contact</a></p>
                </form>
            </nav>
    </div>

    <div id="instagram">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    
        <script>
            /*
                발급된 토큰은 장기 실행 액세스 토큰으로 60일간 사용이 가능합니다.
                https://developers.facebook.com/docs/instagram-basic-display-api/guides/long-lived-access-tokens

                발급된 토큰은 만료일(60일)이내에 refresh_access_token혹은, 페이스북 개발자 센터내의 토큰 재발급을 통해 연장을 해주어야합니다.
                https://developers.facebook.com/docs/instagram-basic-display-api/reference/refresh_access_token
            */
            var token = "IGQVJXOXdqaFhUNTU0VjFrOG0ta0V0X0M0c2J2TXpqemhzWjFMcmJnLUs3N2pvR01vd1FHN09OSFRUWkZAwdC1DVVYxUnhYZA3dSbXdDcGNudUxWaHdpV2FVaWtmbnhkZA1VxM1dvM0tYbThwSDRTcFo0UgZDZD";

            
            $.ajax({
                type: "GET",
                dataType: "jsonp",
                cache: false,
                url: "https://graph.instagram.com/me/media?access_token=" + token + "&fields=id,caption,media_type,media_url,thumbnail_url,permalink",
                success: function(response) {
                    console.log(response);
                    if (response.data != undefined && response.data.length > 0) {
                        for(i = 0; i < 20; i++){
                            if(response.data[i]){
                                var item = response.data[i];
                                var image_url = "";
                                var post = "";
                                if(item.media_type === "VIDEO"){
                                    image_url = item.thumbnail_url;
                                }else{
                                    image_url = item.media_url;
                                }
                                post += '<div class="instagram_item instagram_item'+i+'">';
                                    post += '<a href="'+ item.permalink +'" target="_blank" rel="noopener noreferrer" style="background-image: url(' + image_url + ');">';
                                        post += '<p>'+ item.caption +'</p>';
                                    post += '</a>';
                                post += '</div>';
                                $('#instagram').append(post);
                            }else{
                                // if no curent item
                                show_fallback('#insta-item-'+i)
                            }
                        }
                    }else{
                        // if api error
                        show_fallback('.instagram-item')
                    }
                },
                error :function(){
                    // if http error
                    show_fallback('.instagram-item')
                }
            });
            function show_fallback(el){
                $(el).addClass('loaded fallback');
            }
        </script>
    </div>

    <script type="text/javascript" src="action.js"></script>

    
    
</body>
</html>


